<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>SOMAExperiment Axis Query — SOMAExperimentAxisQuery • tiledbsoma</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="SOMAExperiment Axis Query — SOMAExperimentAxisQuery"><meta name="description" content="Perform an axis-based query against a SOMAExperiment.
SOMAExperimentAxisQuery allows easy selection and extraction of data from a
single SOMAMeasurement in a SOMAExperiment, by obs/var (axis)
coordinates and/or value filter. The primary use for this class is slicing
SOMAExperiment X layers by obs or var value and/or coordinates.
(lifecycle: maturing)
X Layer Support


Slicing on SOMASparseNDArray X matrices is supported;
slicing on SOMADenseNDArray is not supported at this time.



Result Size


SOMAExperimentAxisQuery query class assumes it can store the full result of
both axis dataframe queries in memory, and only provides incremental access
to the underlying X NDArray. Accessors such as n_obs and n_vars codify
this in the class.

"><meta property="og:description" content="Perform an axis-based query against a SOMAExperiment.
SOMAExperimentAxisQuery allows easy selection and extraction of data from a
single SOMAMeasurement in a SOMAExperiment, by obs/var (axis)
coordinates and/or value filter. The primary use for this class is slicing
SOMAExperiment X layers by obs or var value and/or coordinates.
(lifecycle: maturing)
X Layer Support


Slicing on SOMASparseNDArray X matrices is supported;
slicing on SOMADenseNDArray is not supported at this time.



Result Size


SOMAExperimentAxisQuery query class assumes it can store the full result of
both axis dataframe queries in memory, and only provides incremental access
to the underlying X NDArray. Accessors such as n_obs and n_vars codify
this in the class.

"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tiledbsoma</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.13.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Vignettes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes"><li><h6 class="dropdown-header" data-toc-skip>SOMA Introduction</h6></li>
    <li><a class="dropdown-item" href="../articles/soma-objects.html">SOMA Objects Overview</a></li>
    <li><a class="dropdown-item" href="../articles/soma-reading.html">Reading From SOMA Objects</a></li>
    <li><a class="dropdown-item" href="../articles/soma-experiment-queries.html">Querying a SOMA Experiment</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>SOMA Configuration</h6></li>
    <li><a class="dropdown-item" href="../articles/UsingPlatformConfig.html">Using PlatformConfig</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/single-cell-data/TileDB-SOMA/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1><code>SOMAExperiment</code> Axis Query</h1>
      <small class="dont-index">Source: <a href="https://github.com/single-cell-data/TileDB-SOMA/blob/1.13.1/R/SOMAExperimentAxisQuery.R" class="external-link"><code>R/SOMAExperimentAxisQuery.R</code></a></small>
      <div class="d-none name"><code>SOMAExperimentAxisQuery.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Perform an axis-based query against a <code><a href="SOMAExperiment.html">SOMAExperiment</a></code>.</p>
<p><code>SOMAExperimentAxisQuery</code> allows easy selection and extraction of data from a
single <code><a href="SOMAMeasurement.html">SOMAMeasurement</a></code> in a <code><a href="SOMAExperiment.html">SOMAExperiment</a></code>, by <code>obs</code>/<code>var</code> (axis)
coordinates and/or value filter. The primary use for this class is slicing
<code><a href="SOMAExperiment.html">SOMAExperiment</a></code> <code>X</code> layers by <code>obs</code> or <code>var</code> value and/or coordinates.
(lifecycle: maturing)</p><div class="section">
<h3 id="x-layer-support">X Layer Support<a class="anchor" aria-label="anchor" href="#x-layer-support"></a></h3>


<p>Slicing on <code><a href="SOMASparseNDArray.html">SOMASparseNDArray</a></code> <code>X</code> matrices is supported;
slicing on <code><a href="SOMADenseNDArray.html">SOMADenseNDArray</a></code> is not supported at this time.</p>
</div>

<div class="section">
<h3 id="result-size">Result Size<a class="anchor" aria-label="anchor" href="#result-size"></a></h3>


<p><code>SOMAExperimentAxisQuery</code> query class assumes it can store the full result of
both axis dataframe queries in memory, and only provides incremental access
to the underlying X NDArray. Accessors such as <code>n_obs</code> and <code>n_vars</code> codify
this in the class.</p>
</div>

    </div>


    <div class="section level2">
    <h2 id="active-bindings">Active bindings<a class="anchor" aria-label="anchor" href="#active-bindings"></a></h2>
    <p></p><div class="r6-active-bindings"><dl><dt><code>experiment</code></dt>
<dd><p>The parent <code><a href="SOMAExperiment.html">SOMAExperiment</a></code> object.</p></dd>


<dt><code>indexer</code></dt>
<dd><p>The <code><a href="SOMAAxisIndexer.html">SOMAAxisIndexer</a></code> object.</p></dd>


<dt><code>obs_query</code></dt>
<dd><p>The <code>obs</code> <code><a href="SOMAAxisQuery.html">SOMAAxisQuery</a></code> object.</p></dd>


<dt><code>var_query</code></dt>
<dd><p>The <code>var</code> <code><a href="SOMAAxisQuery.html">SOMAAxisQuery</a></code> object.</p></dd>


<dt><code>n_obs</code></dt>
<dd><p>The number of <code>obs</code> axis query results.</p></dd>


<dt><code>n_vars</code></dt>
<dd><p>The number of <code>var</code> axis query results.</p></dd>


<dt><code>obs_df</code></dt>
<dd><p>The <code>obs</code> <code><a href="SOMADataFrame.html">SOMADataFrame</a></code> object.</p></dd>


<dt><code>var_df</code></dt>
<dd><p>The <code>var</code> <code><a href="SOMADataFrame.html">SOMADataFrame</a></code> object for the specified
<code>measurement_name</code>.</p></dd>


<dt><code>ms</code></dt>
<dd><p>The <code><a href="SOMAMeasurement.html">SOMAMeasurement</a></code> object for the specified
<code>measurement_name</code>.</p></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>

<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-SOMAExperimentAxisQuery-new"><code>SOMAExperimentAxisQuery$new()</code></a></p></li>
<li><p><a href="#method-SOMAExperimentAxisQuery-obs"><code>SOMAExperimentAxisQuery$obs()</code></a></p></li>
<li><p><a href="#method-SOMAExperimentAxisQuery-var"><code>SOMAExperimentAxisQuery$var()</code></a></p></li>
<li><p><a href="#method-SOMAExperimentAxisQuery-obs_joinids"><code>SOMAExperimentAxisQuery$obs_joinids()</code></a></p></li>
<li><p><a href="#method-SOMAExperimentAxisQuery-var_joinids"><code>SOMAExperimentAxisQuery$var_joinids()</code></a></p></li>
<li><p><a href="#method-SOMAExperimentAxisQuery-X"><code>SOMAExperimentAxisQuery$X()</code></a></p></li>
<li><p><a href="#method-SOMAExperimentAxisQuery-obsm"><code>SOMAExperimentAxisQuery$obsm()</code></a></p></li>
<li><p><a href="#method-SOMAExperimentAxisQuery-varm"><code>SOMAExperimentAxisQuery$varm()</code></a></p></li>
<li><p><a href="#method-SOMAExperimentAxisQuery-obsp"><code>SOMAExperimentAxisQuery$obsp()</code></a></p></li>
<li><p><a href="#method-SOMAExperimentAxisQuery-varp"><code>SOMAExperimentAxisQuery$varp()</code></a></p></li>
<li><p><a href="#method-SOMAExperimentAxisQuery-read"><code>SOMAExperimentAxisQuery$read()</code></a></p></li>
<li><p><a href="#method-SOMAExperimentAxisQuery-to_sparse_matrix"><code>SOMAExperimentAxisQuery$to_sparse_matrix()</code></a></p></li>
<li><p><a href="#method-SOMAExperimentAxisQuery-to_seurat"><code>SOMAExperimentAxisQuery$to_seurat()</code></a></p></li>
<li><p><a href="#method-SOMAExperimentAxisQuery-to_seurat_assay"><code>SOMAExperimentAxisQuery$to_seurat_assay()</code></a></p></li>
<li><p><a href="#method-SOMAExperimentAxisQuery-to_seurat_reduction"><code>SOMAExperimentAxisQuery$to_seurat_reduction()</code></a></p></li>
<li><p><a href="#method-SOMAExperimentAxisQuery-to_seurat_graph"><code>SOMAExperimentAxisQuery$to_seurat_graph()</code></a></p></li>
<li><p><a href="#method-SOMAExperimentAxisQuery-to_single_cell_experiment"><code>SOMAExperimentAxisQuery$to_single_cell_experiment()</code></a></p></li>
<li><p><a href="#method-SOMAExperimentAxisQuery-clone"><code>SOMAExperimentAxisQuery$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-SOMAExperimentAxisQuery-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Create a new <code>SOMAExperimentAxisQuery</code> object.</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/SOMAExperimentAxisQuery.html">SOMAExperimentAxisQuery</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  <span class="va">experiment</span>,</span>
<span>  <span class="va">measurement_name</span>,</span>
<span>  obs_query <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  var_query <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>experiment</code></dt>
<dd><p>A <code><a href="SOMAExperiment.html">SOMAExperiment</a></code> object.</p></dd>


<dt><code>measurement_name</code></dt>
<dd><p>The name of the measurement to query.</p></dd>


<dt><code>obs_query, var_query</code></dt>
<dd><p>An <code><a href="SOMAAxisQuery.html">SOMAAxisQuery</a></code> object for the obs/var
axis.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-SOMAExperimentAxisQuery-obs"></a><div class="section">
<h3 id="method-obs-">Method <code>obs()</code><a class="anchor" aria-label="anchor" href="#method-obs-"></a></h3>
<p>Retrieve obs <a href="TableReadIter.html">TableReadIter</a></p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">SOMAExperimentAxisQuery</span><span class="op">$</span><span class="fu">obs</span><span class="op">(</span>column_names <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>column_names</code></dt>
<dd><p>A character vector of column names to retrieve</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-SOMAExperimentAxisQuery-var"></a><div class="section">
<h3 id="method-var-">Method <code><a href="https://rdrr.io/r/stats/cor.html" class="external-link">var()</a></code><a class="anchor" aria-label="anchor" href="#method-var-"></a></h3>
<p>Retrieve var <code><a href="https://arrow.apache.org/docs/r/reference/Table-class.html" class="external-link">arrow::Table</a></code></p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">SOMAExperimentAxisQuery</span><span class="op">$</span><span class="fu">var</span><span class="op">(</span>column_names <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>column_names</code></dt>
<dd><p>A character vector of column names to retrieve</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-SOMAExperimentAxisQuery-obs_joinids"></a><div class="section">
<h3 id="method-obs-joinids-">Method <code>obs_joinids()</code><a class="anchor" aria-label="anchor" href="#method-obs-joinids-"></a></h3>
<p>Retrieve <code>soma_joinids</code> as an <code><a href="https://arrow.apache.org/docs/r/reference/array-class.html" class="external-link">arrow::Array</a></code> for <code>obs</code>.</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">SOMAExperimentAxisQuery</span><span class="op">$</span><span class="fu">obs_joinids</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-SOMAExperimentAxisQuery-var_joinids"></a><div class="section">
<h3 id="method-var-joinids-">Method <code>var_joinids()</code><a class="anchor" aria-label="anchor" href="#method-var-joinids-"></a></h3>
<p>Retrieve <code>soma_joinids</code> as an <code><a href="https://arrow.apache.org/docs/r/reference/array-class.html" class="external-link">arrow::Array</a></code> for <code>var</code>.</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">SOMAExperimentAxisQuery</span><span class="op">$</span><span class="fu">var_joinids</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-SOMAExperimentAxisQuery-X"></a><div class="section">
<h3 id="method-x-">Method <code>X()</code><a class="anchor" aria-label="anchor" href="#method-x-"></a></h3>
<p>Retrieves an <code>X</code> layer as a <a href="SOMASparseNDArrayRead.html">SOMASparseNDArrayRead</a></p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">SOMAExperimentAxisQuery</span><span class="op">$</span><span class="fu">X</span><span class="op">(</span><span class="va">layer_name</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>layer_name</code></dt>
<dd><p>The name of the layer to retrieve.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-SOMAExperimentAxisQuery-obsm"></a><div class="section">
<h3 id="method-obsm-">Method <code>obsm()</code><a class="anchor" aria-label="anchor" href="#method-obsm-"></a></h3>
<p>Retrieves an <code>obsm</code> layer as a <code><a href="SOMASparseNDArrayRead.html">SOMASparseNDArrayRead</a></code></p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">SOMAExperimentAxisQuery</span><span class="op">$</span><span class="fu">obsm</span><span class="op">(</span><span class="va">layer_name</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>layer_name</code></dt>
<dd><p>The name of the layer to retrieve</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-SOMAExperimentAxisQuery-varm"></a><div class="section">
<h3 id="method-varm-">Method <code>varm()</code><a class="anchor" aria-label="anchor" href="#method-varm-"></a></h3>
<p>Retrieves a <code>varm</code> layer as a <code><a href="SOMASparseNDArrayRead.html">SOMASparseNDArrayRead</a></code></p><div class="section">
<h4 id="usage-7">Usage<a class="anchor" aria-label="anchor" href="#usage-7"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">SOMAExperimentAxisQuery</span><span class="op">$</span><span class="fu">varm</span><span class="op">(</span><span class="va">layer_name</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-5">Arguments<a class="anchor" aria-label="anchor" href="#arguments-5"></a></h4>
<p></p><div class="arguments"><dl><dt><code>layer_name</code></dt>
<dd><p>The name of the layer to retrieve</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-SOMAExperimentAxisQuery-obsp"></a><div class="section">
<h3 id="method-obsp-">Method <code>obsp()</code><a class="anchor" aria-label="anchor" href="#method-obsp-"></a></h3>
<p>Retrieves an <code>obsp</code> layer as a <code><a href="SOMASparseNDArrayRead.html">SOMASparseNDArrayRead</a></code></p><div class="section">
<h4 id="usage-8">Usage<a class="anchor" aria-label="anchor" href="#usage-8"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">SOMAExperimentAxisQuery</span><span class="op">$</span><span class="fu">obsp</span><span class="op">(</span><span class="va">layer_name</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-6">Arguments<a class="anchor" aria-label="anchor" href="#arguments-6"></a></h4>
<p></p><div class="arguments"><dl><dt><code>layer_name</code></dt>
<dd><p>The name of the layer to retrieve</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-SOMAExperimentAxisQuery-varp"></a><div class="section">
<h3 id="method-varp-">Method <code>varp()</code><a class="anchor" aria-label="anchor" href="#method-varp-"></a></h3>
<p>Retrieves a <code>varp</code> layer as a <code><a href="SOMASparseNDArrayRead.html">SOMASparseNDArrayRead</a></code></p><div class="section">
<h4 id="usage-9">Usage<a class="anchor" aria-label="anchor" href="#usage-9"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">SOMAExperimentAxisQuery</span><span class="op">$</span><span class="fu">varp</span><span class="op">(</span><span class="va">layer_name</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-7">Arguments<a class="anchor" aria-label="anchor" href="#arguments-7"></a></h4>
<p></p><div class="arguments"><dl><dt><code>layer_name</code></dt>
<dd><p>The name of the layer to retrieve</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-SOMAExperimentAxisQuery-read"></a><div class="section">
<h3 id="method-read-">Method <code>read()</code><a class="anchor" aria-label="anchor" href="#method-read-"></a></h3>
<p>Reads the entire query result as a list of
<code><a href="https://arrow.apache.org/docs/r/reference/Table-class.html" class="external-link">arrow::Table</a></code>s. This is a low-level routine intended to be used by
loaders for other in-core formats, such as <code>Seurat</code>, which can be created
from the resulting Tables.</p><div class="section">
<h4 id="usage-10">Usage<a class="anchor" aria-label="anchor" href="#usage-10"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">SOMAExperimentAxisQuery</span><span class="op">$</span><span class="fu">read</span><span class="op">(</span></span>
<span>  X_layers <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  obs_column_names <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  var_column_names <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-8">Arguments<a class="anchor" aria-label="anchor" href="#arguments-8"></a></h4>
<p></p><div class="arguments"><dl><dt><code>X_layers</code></dt>
<dd><p>The name(s) of the <code>X</code> layer(s) to read and return.</p></dd>


<dt><code>obs_column_names, var_column_names</code></dt>
<dd><p>Specify which column names in
<code>var</code> and <code>obs</code> dataframes to read and return.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-SOMAExperimentAxisQuery-to_sparse_matrix"></a><div class="section">
<h3 id="method-to-sparse-matrix-">Method <code>to_sparse_matrix()</code><a class="anchor" aria-label="anchor" href="#method-to-sparse-matrix-"></a></h3>
<p>Retrieve a collection layer as a sparse matrix with named
dimensions.</p>
<p>Load any layer from the <code>X</code>, <code>obsm</code>, <code>varm</code>, <code>obsp</code>, or <code>varp</code>
collections as a <a href="https://rdrr.io/pkg/Matrix/man/sparseMatrix-class.html" class="external-link">sparse matrix</a>.</p>
<p>By default the matrix dimensions are named using the <code>soma_joinid</code> values
in the specified layer's dimensions (e.g., <code>soma_dim_0</code>). However,
dimensions can be named using values from any <code>obs</code> or <code>var</code> column that
uniquely identifies each record by specifying the <code>obs_index</code> and
<code>var_index</code> arguments.</p>
<p>For layers in <code>obsm</code> or <code>varm</code>, the column axis (the axis not
indexed by “<code>obs</code>” or “<code>var</code>”) is set to the
range of values present in “<code>soma_dim_1</code>”; this ensures
that gaps in this axis are preserved (eg. when a query for
“<code>obs</code>” that results in selecting entries that are all zero
for a given PC)</p><div class="section">
<h4 id="usage-11">Usage<a class="anchor" aria-label="anchor" href="#usage-11"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">SOMAExperimentAxisQuery</span><span class="op">$</span><span class="fu">to_sparse_matrix</span><span class="op">(</span></span>
<span>  <span class="va">collection</span>,</span>
<span>  <span class="va">layer_name</span>,</span>
<span>  obs_index <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  var_index <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-9">Arguments<a class="anchor" aria-label="anchor" href="#arguments-9"></a></h4>
<p></p><div class="arguments"><dl><dt><code>collection</code></dt>
<dd><p>The <code><a href="SOMACollection.html">SOMACollection</a></code> containing the layer of
interest, either: <code>"X"</code>, <code>"obsm"</code>, <code>"varm"</code>, <code>"obsp"</code>, or <code>"varp"</code>.</p></dd>


<dt><code>layer_name</code></dt>
<dd><p>Name of the layer to retrieve from the <code>collection</code>.</p></dd>


<dt><code>obs_index, var_index</code></dt>
<dd><p>Name of the column in <code>obs</code> or <code>var</code>
(<code>var_index</code>) containing values that should be used as dimension labels
in the resulting matrix. Whether the values are used as row or column
labels depends on the selected <code>collection</code>:</p><table class="table table"><tr><td>Collection</td><td><code>obs_index</code></td><td><code>var_index</code></td></tr><tr><td><code>X</code></td><td>row names</td><td>column names</td></tr><tr><td><code>obsm</code></td><td>row names</td><td>ignored</td></tr><tr><td><code>varm</code></td><td>ignored</td><td>row names</td></tr><tr><td><code>obsp</code></td><td>row and column names</td><td>ignored</td></tr><tr><td><code>varp</code></td><td>ignored</td><td>row and column names</td></tr></table></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>A <code><a href="https://rdrr.io/pkg/Matrix/man/sparseMatrix-class.html" class="external-link">Matrix::sparseMatrix</a></code></p>
</div>

</div><p></p><hr><a id="method-SOMAExperimentAxisQuery-to_seurat"></a><div class="section">
<h3 id="method-to-seurat-">Method <code>to_seurat()</code><a class="anchor" aria-label="anchor" href="#method-to-seurat-"></a></h3>
<p>Loads the query as a <code><a href="https://mojaveazure.github.io/seurat-object/reference/Seurat-class.html" class="external-link">Seurat</a></code> object</p><div class="section">
<h4 id="usage-12">Usage<a class="anchor" aria-label="anchor" href="#usage-12"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">SOMAExperimentAxisQuery</span><span class="op">$</span><span class="fu">to_seurat</span><span class="op">(</span></span>
<span>  X_layers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>counts <span class="op">=</span> <span class="st">"counts"</span>, data <span class="op">=</span> <span class="st">"logcounts"</span><span class="op">)</span>,</span>
<span>  obs_index <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  var_index <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  obs_column_names <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  var_column_names <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  obsm_layers <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  varm_layers <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  obsp_layers <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  drop_levels <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-10">Arguments<a class="anchor" aria-label="anchor" href="#arguments-10"></a></h4>
<p></p><div class="arguments"><dl><dt><code>X_layers</code></dt>
<dd><p>A named character of X layers to add to the Seurat assay where the names are the names of Seurat slots and the values are the names of layers within <code>X</code>; names should be one of: </p><ul><li><p>“<code>counts</code>” to add the layer as <code>counts</code></p></li>
<li><p>“<code>data</code>” to add the layer as <code>data</code></p></li>
<li><p>“<code>scale.data</code>” to add the layer as <code>scale.data</code></p></li>
</ul> At least one of “<code>counts</code>” or “<code>data</code>” is required</dd>


<dt><code>obs_index</code></dt>
<dd><p>Name of column in <code>obs</code> to add as cell names; uses <code>paste0("cell", obs_joinids())</code> by default</p></dd>


<dt><code>var_index</code></dt>
<dd><p>Name of column in <code>var</code> to add as feature names; uses <code>paste0("feature", var_joinids())</code> by default</p></dd>


<dt><code>obs_column_names</code></dt>
<dd><p>Names of columns in <code>obs</code> to add as cell-level meta data; by default, loads all columns</p></dd>


<dt><code>var_column_names</code></dt>
<dd><p>Names of columns in <code>var</code> to add as feature-level meta data; by default, loads all columns</p></dd>


<dt><code>obsm_layers</code></dt>
<dd><p>Names of arrays in <code>obsm</code> to add as the cell embeddings; pass <code>FALSE</code> to suppress loading in any dimensional reductions; by default, loads all dimensional reduction information</p></dd>


<dt><code>varm_layers</code></dt>
<dd><p>Named vector of arrays in <code>varm</code> to load in as the feature loadings; names must be names of arrays in <code>obsm</code> (eg. <code>varm_layers = c(X_pca = "PCs")</code>); pass <code>FALSE</code> to suppress loading in any feature loadings; will try to determine <code>varm_layers</code> from <code>obsm_layers</code></p></dd>


<dt><code>obsp_layers</code></dt>
<dd><p>Names of arrays in <code>obsp</code> to load in as <code><a href="https://mojaveazure.github.io/seurat-object/reference/Graph-class.html" class="external-link">Graph</a>s</code>; by default, loads all graphs</p></dd>


<dt><code>drop_levels</code></dt>
<dd><p>Drop unused levels from <code>obs</code> and <code>var</code> factor columns</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-1">Returns<a class="anchor" aria-label="anchor" href="#returns-1"></a></h4>
<p>A <code><a href="https://mojaveazure.github.io/seurat-object/reference/Seurat-class.html" class="external-link">Seurat</a></code> object</p>
</div>

</div><p></p><hr><a id="method-SOMAExperimentAxisQuery-to_seurat_assay"></a><div class="section">
<h3 id="method-to-seurat-assay-">Method <code>to_seurat_assay()</code><a class="anchor" aria-label="anchor" href="#method-to-seurat-assay-"></a></h3>
<p>Loads the query as a Seurat <code><a href="https://mojaveazure.github.io/seurat-object/reference/Assay-class.html" class="external-link">Assay</a></code></p><div class="section">
<h4 id="usage-13">Usage<a class="anchor" aria-label="anchor" href="#usage-13"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">SOMAExperimentAxisQuery</span><span class="op">$</span><span class="fu">to_seurat_assay</span><span class="op">(</span></span>
<span>  X_layers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>counts <span class="op">=</span> <span class="st">"counts"</span>, data <span class="op">=</span> <span class="st">"logcounts"</span><span class="op">)</span>,</span>
<span>  obs_index <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  var_index <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  var_column_names <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  drop_levels <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-11">Arguments<a class="anchor" aria-label="anchor" href="#arguments-11"></a></h4>
<p></p><div class="arguments"><dl><dt><code>X_layers</code></dt>
<dd><p>A named character of X layers to add to the Seurat assay where the names are the names of Seurat slots and the values are the names of layers within <code>X</code>; names should be one of: </p><ul><li><p>“<code>counts</code>” to add the layer as <code>counts</code></p></li>
<li><p>“<code>data</code>” to add the layer as <code>data</code></p></li>
<li><p>“<code>scale.data</code>” to add the layer as <code>scale.data</code></p></li>
</ul> At least one of “<code>counts</code>” or “<code>data</code>” is required</dd>


<dt><code>obs_index</code></dt>
<dd><p>Name of column in <code>obs</code> to add as cell names; uses <code>paste0("cell", obs_joinids())</code> by default</p></dd>


<dt><code>var_index</code></dt>
<dd><p>Name of column in <code>var</code> to add as feature names; uses <code>paste0("feature", var_joinids())</code> by default</p></dd>


<dt><code>var_column_names</code></dt>
<dd><p>Names of columns in <code>var</code> to add as feature-level meta data; by default, loads all columns</p></dd>


<dt><code>drop_levels</code></dt>
<dd><p>Drop unused levels from <code>var</code> factor columns</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-2">Returns<a class="anchor" aria-label="anchor" href="#returns-2"></a></h4>
<p>An <code><a href="https://mojaveazure.github.io/seurat-object/reference/Assay-class.html" class="external-link">Assay</a></code> object</p>
</div>

</div><p></p><hr><a id="method-SOMAExperimentAxisQuery-to_seurat_reduction"></a><div class="section">
<h3 id="method-to-seurat-reduction-">Method <code>to_seurat_reduction()</code><a class="anchor" aria-label="anchor" href="#method-to-seurat-reduction-"></a></h3>
<p>Loads the query as a Seurat
<a href="https://mojaveazure.github.io/seurat-object/reference/DimReduc-class.html" class="external-link">dimensional reduction</a></p><div class="section">
<h4 id="usage-14">Usage<a class="anchor" aria-label="anchor" href="#usage-14"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">SOMAExperimentAxisQuery</span><span class="op">$</span><span class="fu">to_seurat_reduction</span><span class="op">(</span></span>
<span>  <span class="va">obsm_layer</span>,</span>
<span>  varm_layer <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  obs_index <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  var_index <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-12">Arguments<a class="anchor" aria-label="anchor" href="#arguments-12"></a></h4>
<p></p><div class="arguments"><dl><dt><code>obsm_layer</code></dt>
<dd><p>Name of array in <code>obsm</code> to load as the
cell embeddings</p></dd>


<dt><code>varm_layer</code></dt>
<dd><p>Name of the array in <code>varm</code> to load as the
feature loadings; by default, will try to determine <code>varm_layer</code>
from <code>obsm_layer</code></p></dd>


<dt><code>obs_index</code></dt>
<dd><p>Name of column in <code>obs</code> to add as cell names; uses <code>paste0("cell", obs_joinids())</code> by default</p></dd>


<dt><code>var_index</code></dt>
<dd><p>Name of column in <code>var</code> to add as feature names; uses <code>paste0("feature", var_joinids())</code> by default</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-3">Returns<a class="anchor" aria-label="anchor" href="#returns-3"></a></h4>
<p>A <code><a href="https://mojaveazure.github.io/seurat-object/reference/DimReduc-class.html" class="external-link">DimReduc</a></code> object</p>
</div>

</div><p></p><hr><a id="method-SOMAExperimentAxisQuery-to_seurat_graph"></a><div class="section">
<h3 id="method-to-seurat-graph-">Method <code>to_seurat_graph()</code><a class="anchor" aria-label="anchor" href="#method-to-seurat-graph-"></a></h3>
<p>Loads the query as a Seurat <a href="https://mojaveazure.github.io/seurat-object/reference/Graph-class.html" class="external-link">graph</a></p><div class="section">
<h4 id="usage-15">Usage<a class="anchor" aria-label="anchor" href="#usage-15"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">SOMAExperimentAxisQuery</span><span class="op">$</span><span class="fu">to_seurat_graph</span><span class="op">(</span><span class="va">obsp_layer</span>, obs_index <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-13">Arguments<a class="anchor" aria-label="anchor" href="#arguments-13"></a></h4>
<p></p><div class="arguments"><dl><dt><code>obsp_layer</code></dt>
<dd><p>Name of array in <code>obsp</code> to load as the graph</p></dd>


<dt><code>obs_index</code></dt>
<dd><p>Name of column in <code>obs</code> to add as cell names; uses <code>paste0("cell", obs_joinids())</code> by default</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-4">Returns<a class="anchor" aria-label="anchor" href="#returns-4"></a></h4>
<p>A <code><a href="https://mojaveazure.github.io/seurat-object/reference/Graph-class.html" class="external-link">Graph</a></code> object</p>
</div>

</div><p></p><hr><a id="method-SOMAExperimentAxisQuery-to_single_cell_experiment"></a><div class="section">
<h3 id="method-to-single-cell-experiment-">Method <code>to_single_cell_experiment()</code><a class="anchor" aria-label="anchor" href="#method-to-single-cell-experiment-"></a></h3>
<p>Loads the query as a
<code>SingleCellExperiment</code> object</p><div class="section">
<h4 id="usage-16">Usage<a class="anchor" aria-label="anchor" href="#usage-16"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">SOMAExperimentAxisQuery</span><span class="op">$</span><span class="fu">to_single_cell_experiment</span><span class="op">(</span></span>
<span>  X_layers <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  obs_index <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  var_index <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  obs_column_names <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  var_column_names <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  obsm_layers <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  obsp_layers <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  varp_layers <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  drop_levels <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-14">Arguments<a class="anchor" aria-label="anchor" href="#arguments-14"></a></h4>
<p></p><div class="arguments"><dl><dt><code>X_layers</code></dt>
<dd><p>A character vector of X layers to add as assays in the main experiment; may optionally be named to set the name of the resulting assay (eg. <code>X_layers = c(counts = "raw")</code> will load in X layer “<code>raw</code>” as assay “<code>counts</code>”); by default, loads in all X layers</p></dd>


<dt><code>obs_index</code></dt>
<dd><p>Name of column in <code>obs</code> to add as cell names; uses <code>paste0("cell", obs_joinids())</code> by default</p></dd>


<dt><code>var_index</code></dt>
<dd><p>Name of column in <code>var</code> to add as feature names; uses <code>paste0("feature", var_joinids())</code> by default</p></dd>


<dt><code>obs_column_names</code></dt>
<dd><p>Names of columns in <code>obs</code> to add as <code>colData</code>; by default, loads all columns</p></dd>


<dt><code>var_column_names</code></dt>
<dd><p>Names of columns in <code>var</code> to add as <code>rowData</code>; by default, loads all columns</p></dd>


<dt><code>obsm_layers</code></dt>
<dd><p>Names of arrays in <code>obsm</code> to add as the reduced dimensions; pass <code>FALSE</code> to suppress loading in any reduced dimensions; by default, loads all reduced dimensions</p></dd>


<dt><code>obsp_layers</code></dt>
<dd><p>Names of arrays in <code>obsp</code> to load in as <code>SelfHits</code>; by default, loads all graphs</p></dd>


<dt><code>varp_layers</code></dt>
<dd><p>Names of arrays in <code>varp</code> to load in as <code>SelfHits</code>; by default, loads all networks</p></dd>


<dt><code>drop_levels</code></dt>
<dd><p>Drop unused levels from <code>obs</code> and <code>var</code> factor columns</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-5">Returns<a class="anchor" aria-label="anchor" href="#returns-5"></a></h4>
<p>A <code>SingleCellExperiment</code> object</p>
</div>

</div><p></p><hr><a id="method-SOMAExperimentAxisQuery-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-17">Usage<a class="anchor" aria-label="anchor" href="#usage-17"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">SOMAExperimentAxisQuery</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-15">Arguments<a class="anchor" aria-label="anchor" href="#arguments-15"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Aaron Wolen, Dirk Eddelbuettel, Paul Hoffman, John Kerl, TileDB, Inc..</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

